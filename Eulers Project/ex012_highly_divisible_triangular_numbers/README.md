# Highly divisible triangular num

In this problem the question was to find the value of the first triangle number to have over five hundred divisors.
A sequence of triangle numbers is generated by adding the natural numbers. So the 7th triangle number would be 
1 + 2 + 3 + 4 + 5 + 6 + 7 = 28. 

Solution
---

```fsharp
let triangularNum (n : int) : int = (n * (n - 1)) / 2 

let countDivisors (x : int) : int = 
    let rec loop (i : int) (divCount : int) : int = 
        match i * i with
        | i2 when i2 < x -> if x % i = 0 then loop (i + 1) (divCount + 2)
                            else loop (i + 1) divCount
        | i2 when i2 > x -> divCount
        | _ -> divCount + 1
    loop 1 0

Seq.initInfinite (fun i -> triangularNum i) 
|> Seq.find (fun n -> countDivisors n > 500) 
|> printfn("%i")
```

Walkthrough
---

In order to find the first traingular number which can be divided by more than 500 numbers, we need 2 functions

- One to define a triangular number
- The second, to count the amount of divisors a number has

With these two functions, we can count the divisors of all triangular numbers until we have found the first number with more than 500 divisors. In F#-code it looks like this:

```fsharp
Seq.initInfinite (fun i -> triangularNum i) 
|> Seq.find (fun n -> countDivisors n > 500) 
|> printfn("%i")
```

### Define a triangular number in F#

Triangular numbers can be visualised, like this, using triangles:

![triangular number](https://user-images.githubusercontent.com/38069530/39562687-55b97ec8-4ead-11e8-8402-6ee804801337.png)

The **n**th triangular number can also be defined as **n** * (**n** + 1) / 2 by calculating the area of the triangle as shown in the following picture:

![triangular number formular](https://user-images.githubusercontent.com/38069530/39562682-4c6c1844-4ead-11e8-96e5-fa7df1052998.png)

This method is easy to implement:

```fsharp
let triangularNum (n : int) : int = (n * (n - 1)) / 2 
```

### Count the divisors of a given number

Counting divisors is a more complicated task. The intuitive way would be to loop through all numbers from 1 to **x**, **x** beeing the number to test, and test if **x** can be divided. However, this task can be simplified. For every divisor we find, we know that there must be another one. For example, let **x** be 28 and we have fund out that 28 is divisible by 4, we also know that 28 is divisible by 7 since 28/4 = 7. So we only have to iterate from 1 to the square root of **x** to find all the divisors. 

```fsharp
let countDivisors (x : int) : int = 
    let rec loop (i : int) (divCount : int) : int = 
        match i * i with
        | i2 when i2 <= x -> if x % i = 0 then loop (i + 1) (divCount + 2)
                            else loop (i + 1) divCount
        | i2 when i2 > x -> divCount
    loop 1 0
```

But this function won't give us the the correct answer for all cases. Let **x** be 25 and we just tested that 5 is a divisor of 25. In the code above 'divCount' would increase by 2 even though 25 divided by 5 also equals 5. So we need to add a third option in case 
**i** * **i** equals **x**.

```fsharp
let countDivisors (x : int) : int = 
    let rec loop (i : int) (divCount : int) : int = 
        match i * i with
        | i2 when i2 < x -> if x % i = 0 then loop (i + 1) (divCount + 2)
                            else loop (i + 1) divCount
        | i2 when i2 > x -> divCount
        | _ -> divCount + 1
    loop 1 0
```

After both of those functions are implemented, we can run the program.

Result
---

The result equals to 76576500.




